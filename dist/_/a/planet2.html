<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>

        body {
            margin: 0;
        }
        * {
            box-sizing: border-box;
        }


        .scene {
            position: relative;
            width: 500px;
            height: 200px;
            background: #F00;
            margin: 400px auto 0 auto;
        }
        .camera {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding-top: 100%;
            background: rgba(0,0,0,.2);
            perspective: 500px;
        }
        .system {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform: rotateX(90deg);
            transform-origin: 50% 100%;
            border: 4px dashed #000;
        }
        .dot {
            position: absolute;
            left: 50%;
            top: 0;
            width: 4px;
            height: 4px;
            margin: -2px 0 0 -2px;
            background: #F0F;
        }


    </style>
</head>
<body>



    <div class="scene">
        <div class="camera">
            <div class="system"></div>
            <div class="dot"></div>
        </div>
    </div>

    <script>

        const $camera = document.querySelector('.camera');
        const $system = document.querySelector('.system');
        const $dot = document.querySelector('.dot');






        // Find .scene height

        const perspective = 500;
        const width = height = 500;
        const point = [0, height, 0] // left-top corner
        let angle = 57;







        function update () {

            angle++;

            const a = angle * Math.PI / 180

            $camera.style.perspective = perspective + 'px';
            $system.style.transform = `rotateX(${angle}deg)`

            const rotated = [
                point[0],
                point[1] * Math.cos(-a) - point[2] * Math.sin(-a),
                point[1] * Math.sin(-a) + point[2] * Math.cos(-a)
            ]

            // $dot.style.transform = `translate3d(${rotated[0]}px, ${rotated[1]}px, ${rotated[2]}px)`

            const translated = [
                rotated[0],
                point[1] - rotated[1],
                rotated[2]
            ]

            // console.log(-translated[1] * perspective / (perspective + translated[2]))

            // console.log(12)

            $dot.style.transform = `translate3d(${translated[0]}px, ${translated[1]}px, ${translated[2]}px)`

            const b = [
                translated[0],
                translated[1]
                // translated[1] / ,
            ]

        }


        update();
        // setInterval(update, 100)

        //
        // const projected = [
        //     point[0] * perspective / (perspective + point[2]),
        //     point[1] * perspective / (perspective + point[2]),
        // ]
        //
        // console.log(rotated)


        // console.log(rotated);

        // |1     0           0| |x|   |        x        |   |x'|
        // |0   cos θ    −sin θ| |y| = |y cos θ − z sin θ| = |y'|
        // |0   sin θ     cos θ| |z|   |y sin θ + z cos θ|   |z'|

        const x = 0;
        const y = height / 2;



        // zoom changes scene



    </script>

</body>
</html>